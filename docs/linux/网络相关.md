# 网络相关的问题

## `DNS` 相关

我在使用 `sudo apt update` 命令时, 报错如下
```bash
Temporary failure resolving
```
搜索后发现是 `Ubuntu-DNS` 设置的问题, 更具体的说是 `WSL2` 自己的问题, 可参考[此issue](https://github.com/microsoft/WSL/issues/5256)
新方案, 此方案针对于使用 `WSL2` 的用户
```bash
sudo vim /etc/wsl.conf #设置如下
# 然后关闭 WSL2 
#在windows中使用这个命令
wsl --shutdown
# 然后重开WSL
sudo vim /etc/resolv.conf
# 添加如下内容
# 其他的也可以, 我这里 8.8.8.8 效果比较好
```

>wsl.conf 中
```ini
[network]
generateResolvConf = false
```

> resolv.conf 中
```ini
nameserver 8.8.8.8
```
> 或
```ini
nameserver 1.1.1.1
```

以下都是废话, 因为不适用于我的 `WSL2-Clash-tun`

原方案
我找到的解决方案是
[resolvconf](https://askubuntu.com/questions/91543/apt-get-update-fails-to-fetch-files-temporary-failure-resolving-error)和[dnsmasq](https://unix.stackexchange.com/questions/128220/how-do-i-set-my-dns-when-resolv-conf-is-being-overwritten)这两种. 

使用如下:
```bash
#我使用的方案
sudo apt install resolvconf
echo "nameserver 8.8.8.8" | sudo tee /etc/resolvconf/resolv.conf.d/base > /dev/null
sudo resolvconf -u
sudo apt update

或 #第二种我没试
sudo apt install dnsmasq
vim /etc/dnsmasq.conf #添加内容
sudo service dnsmasq restart
sudo service network-manager restart
```
添加如下内容
```ini
server=8.8.8.8
server=8.8.4.4
```
记录下来, 方便以后使用